name: Daily Indices Chart                                                  
                                                                             
on:                                                                        
    schedule:                                                                
      - cron: '0 20 * * 0-4'                                                 
    workflow_dispatch:                                                       
                                                                             
  permissions:                                                               
    contents: write                                                          
                                                                             
  jobs:                                                                      
    generate-and-publish:                                                    
      runs-on: ubuntu-latest                                                 
                                                                             
      steps:                                                                 
        - name: Checkout repository                                          
          uses: actions/checkout@v4                                          
                                                                             
        - name: Set up Python                                                
          uses: actions/setup-python@v5                                      
          with:                                                              
            python-version: '3.11'                                           
                                                                             
        - name: Install dependencies                                         
          run: |                                                             
            python -m pip install --upgrade pip                              
            pip install requests pillow playwright                           
            python -m playwright install chromium                            
            python -m playwright install-deps                                
                                                                             
        - name: Generate indices charts                                      
          run: python generate_indices.py                                    
                                                                             
        - name: Commit and push images                                       
          run: |                                                             
            git config user.name "GitHub Actions Bot"                        
            git config user.email "actions@github.com"                       
            git add indices_de.png indices_en.png                            
            git diff --staged --quiet || git commit -m "Update indices charts
   $(date +'%Y-%m-%d')"                                                      
            git push
